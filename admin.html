<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>çœŸç ç®¡ç†å¾Œå°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="bg-slate-50 min-h-screen flex text-slate-700">
    <aside class="w-64 bg-emerald-900 text-white p-8">
        <h2 class="text-xl font-bold mb-10 tracking-widest border-b border-emerald-700 pb-4">çœŸç  ADMIN</h2>
        <nav class="space-y-4">
            <button onclick="loadOrders()" class="w-full text-left p-2 hover:bg-emerald-800">ğŸ“‹ å³æ™‚è¨‚å–®</button>
            <button onclick="loadMenuAdmin()" class="w-full text-left p-2 hover:bg-emerald-800">ğŸ± èœå–®/å¥—é¤ç·¨è¼¯</button>
        </nav>
    </aside>

    <main class="flex-1 p-10">
        <div id="main-content" class="bg-white p-8 rounded-2xl shadow-sm border border-slate-200">
            </div>
    </main>

    <script>
        const SUPABASE_URL = 'https://pydlnqriztpzgxbjuohm.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_ISKUWOXUR9A-1y81xCOUXg_8-zNle3v';
        const _s = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        // --- è¨‚å–®åˆ—è¡¨ ---
        async function loadOrders() {
            const { data } = await _s.from('orders').select('*').order('created_at', {ascending:false});
            let html = `<h2 class="text-2xl font-bold mb-6">ç›®å‰è¨‚å–®</h2><div class="grid gap-4">`;
            html += data.map(o => `
                <div class="border p-6 rounded-xl hover:shadow-md transition">
                    <div class="flex justify-between mb-4">
                        <div>
                            <span class="font-bold text-lg">${o.customer_name}</span>
                            <span class="text-sm ml-4 bg-slate-100 px-2 py-1 rounded">${o.adults}å¤§ / ${o.kids_chair}å…’ç«¥(æ¤…) / ${o.toddlers}å­©ç«¥</span>
                        </div>
                        <span class="text-emerald-700 font-bold">$${o.total_price}</span>
                    </div>
                    <div class="bg-stone-50 p-4 rounded text-sm text-slate-500">
                        ${o.order_content.map(i => `â€¢ ${i.name}`).join('<br>')}
                    </div>
                    <div class="mt-2 text-xs text-slate-400">${new Date(o.created_at).toLocaleString()} | ${o.phone}</div>
                </div>
            `).join('');
            html += `</div>`;
            document.getElementById('main-content').innerHTML = html;
        }

        // --- èœå–®ç®¡ç†åŸºæœ¬æ¡†æ¶ ---
        function loadMenuAdmin() {
            document.getElementById('main-content').innerHTML = `
                <h2 class="text-2xl font-bold mb-4">èœå–®ç®¡ç†åŠŸèƒ½</h2>
                <p class="mb-8 text-gray-500">æ­¤å€åŸŸå¯æ‰‹å‹•åœ¨ Supabase Dashboard ç·¨è¼¯è³‡æ–™è¡¨é …ç›®ï¼Œæˆ–é€é SQL æŒ‡ä»¤å¿«é€Ÿå»ºç«‹ã€‚</p>
                <div class="p-6 border-2 border-dashed rounded-xl text-center">
                    ç›®å‰æ¨è–¦ç›´æ¥åœ¨ Supabase ä»‹é¢ç®¡ç† <b>menu_items</b> èˆ‡ <b>set_menu_groups</b> è¡¨ã€‚<br>
                    ç¢ºä¿åœ–ç‰‡ URL å·²å¡«å…¥ image_url æ¬„ä½ã€‚
                </div>
            `;
        }

        loadOrders();
    </script>
</body>
</html>
